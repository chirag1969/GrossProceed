<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>REGULAR SEP-25 Performance Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
  <style>
    :root {
      color-scheme: light;
      --bg: #f4f6fb;
      --card-bg: #ffffff;
      --text: #1b1e28;
      --muted: #5f677b;
      --accent: #145afc;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: 12px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      line-height: 1.45;
      display: flex;
      justify-content: center;
    }

    main.dashboard {
      width: min(1200px, 100%);
      padding: 1.5rem 1.25rem 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.75rem;
    }

    .card {
      background: var(--card-bg);
      border-radius: 0.85rem;
      padding: 0.95rem 1rem;
      box-shadow: 0 18px 40px rgba(16, 24, 40, 0.08);
    }

    .kpi-card {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .kpi-title {
      color: var(--muted);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 600;
    }

    .kpi-value {
      font-size: 1.65rem;
      font-weight: 600;
    }

    .chart-grid {
      display: grid;
      gap: 0.75rem;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      grid-auto-rows: 1fr;
    }

    .chart-card {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      height: 100%;
    }

    .chart-card h2 {
      margin: 0;
      font-size: 1.2rem;
    }

    .chart-frame {
      position: relative;
      flex: 1;
      aspect-ratio: 4 / 3;
    }

    .chart-frame canvas {
      position: absolute;
      inset: 0;
      width: 100% !important;
      height: 100% !important;
    }

    @media (max-width: 640px) {
      main.dashboard {
        padding: 1.25rem 1rem 1.75rem;
      }

      .kpi-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }

      .chart-grid {
        grid-template-columns: 1fr;
      }

      .chart-frame {
        aspect-ratio: 3 / 2;
      }
    }
  </style>
</head>
<body>
  <main class="dashboard">
    <section class="kpi-grid" aria-label="Key performance indicators">
      <article class="card kpi-card">
        <div class="kpi-title">Total Units</div>
        <div class="kpi-value">3,856</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Total Revenue</div>
        <div class="kpi-value">$294,677.05</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Gross Proceed</div>
        <div class="kpi-value">$170,933.70</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Final Net</div>
        <div class="kpi-value">$76,271.43</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Ad Spend</div>
        <div class="kpi-value">$17,680.62</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Average Order Value</div>
        <div class="kpi-value">$95.83</div>
      </article>
      <article class="card kpi-card">
        <div class="kpi-title">Net Margin</div>
        <div class="kpi-value">25.9%</div>
      </article>
    </section>

    <section class="chart-grid" aria-label="Performance visualisations">
      <article class="card chart-card">
        <h2>Revenue &amp; Profit Trend</h2>
        <div class="chart-frame">
          <canvas id="daily-chart" aria-label="Daily revenue and final net line chart" role="img"></canvas>
        </div>
      </article>
      <article class="card chart-card">
        <h2>Top Categories by Final Net</h2>
        <div class="chart-frame">
          <canvas id="category-chart" aria-label="Category final net bar chart" role="img"></canvas>
        </div>
      </article>
      <article class="card chart-card">
        <h2>Store Mix</h2>
        <div class="chart-frame">
          <canvas id="store-chart" aria-label="Store revenue and final net comparison" role="img"></canvas>
        </div>
      </article>
      <article class="card chart-card">
        <h2>Top SKUs by Final Net</h2>
        <div class="chart-frame">
          <canvas id="sku-chart" aria-label="Top SKUs ranked by final net" role="img"></canvas>
        </div>
      </article>
    </section>
  </main>

  <script>
    const dailySeries = [{"date":"2025-09-01","revenue":3991.5693,"final_net":967.6681849284316},{"date":"2025-09-02","revenue":27004.3933,"final_net":5892.861777578192},{"date":"2025-09-03","revenue":14134.1591,"final_net":3848.7080137782214},{"date":"2025-09-04","revenue":13442.0764,"final_net":3359.390823024803},{"date":"2025-09-05","revenue":11971.5861,"final_net":3618.287882891206},{"date":"2025-09-06","revenue":9740.0052,"final_net":2007.2764533166428},{"date":"2025-09-07","revenue":5705.8661,"final_net":1391.3388444349875},{"date":"2025-09-08","revenue":19917.309,"final_net":5278.163294205369},{"date":"2025-09-09","revenue":16891.3098,"final_net":4104.160668313585},{"date":"2025-09-10","revenue":10983.5059,"final_net":2793.2267988994954},{"date":"2025-09-11","revenue":11534.2453,"final_net":2952.569931535068},{"date":"2025-09-12","revenue":10964.039,"final_net":2845.538930056686},{"date":"2025-09-13","revenue":9547.360700000001,"final_net":2428.2749996529537},{"date":"2025-09-14","revenue":4074.278,"final_net":1013.0330780450196},{"date":"2025-09-15","revenue":19505.498,"final_net":4923.892216865558},{"date":"2025-09-16","revenue":13897.8109,"final_net":3922.1459336448174},{"date":"2025-09-17","revenue":12579.9332,"final_net":3216.836002467571},{"date":"2025-09-18","revenue":14542.710700000001,"final_net":4423.308448747652},{"date":"2025-09-19","revenue":17487.1466,"final_net":5014.889137143346},{"date":"2025-09-20","revenue":8814.6478,"final_net":2244.4181519997564},{"date":"2025-09-21","revenue":4477.4615,"final_net":1095.3186860311882},{"date":"2025-09-22","revenue":17893.8122,"final_net":4893.260047382762},{"date":"2025-09-23","revenue":15576.3226,"final_net":4036.8586775935028}];

    const categorySeries = [{"category":"VB","final_net":15140.908496576283},{"category":"FAB","final_net":14584.070977783102},{"category":"CFB","final_net":13558.146840077734},{"category":"RCB","final_net":4736.489908168083},{"category":"JMT","final_net":4668.912872766931},{"category":"PF","final_net":3486.1491063341005},{"category":"GEN","final_net":3349.6331984126987},{"category":"HS","final_net":3252.2734973267548},{"category":"HB","final_net":2622.9348881312512},{"category":"CP","final_net":2139.163595413091}];

    const storeMixSeries = [
      { store: 'AMZ REG', revenue: 124372.92, final_net: 33852.24 },
      { store: 'AMZ FBA', revenue: 102750.93, final_net: 25503.26 },
      { store: 'Ebay/Walmart/Website', revenue: 45620.58, final_net: 11884.15 },
      { store: 'AMZ FBA CAN', revenue: 21932.62, final_net: 5031.77 }
    ];

    const topSkuSeries = [
      { sku: 'B5', final_net: 4375.72 },
      { sku: 'FAB-554', final_net: 3459.89 },
      { sku: 'V4-1824', final_net: 1743.15 },
      { sku: 'JMT-59', final_net: 1740.86 },
      { sku: 'V2', final_net: 1713.33 },
      { sku: 'V4F', final_net: 1652.76 },
      { sku: 'V2-1824', final_net: 1572.41 },
      { sku: 'V6', final_net: 1538.79 },
      { sku: 'B12', final_net: 1352.49 },
      { sku: 'S9X', final_net: 1339.43 }
    ];

    const fmtCurrency = (value) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);

    const formatDateLabel = (isoDate) => {
      const [year, month, day] = isoDate.split('-');
      if (!day || !month || !year) {
        return isoDate;
      }
      return `${day}-${month}-${year}`;
    };

    const currencyTooltip = (context) => {
      const value = context.parsed.y ?? context.parsed.x ?? context.raw;
      return `${context.dataset.label}: ${fmtCurrency(value)}`;
    };

    const dailyChartElement = document.getElementById('daily-chart');
    if (dailyChartElement && dailySeries.length > 0) {
      const dailyLabels = dailySeries.map((item) => formatDateLabel(item.date));
      new Chart(dailyChartElement, {
        type: 'line',
        data: {
          labels: dailyLabels,
          datasets: [
            {
              label: 'Revenue',
              data: dailySeries.map((item) => item.revenue),
              borderColor: '#145afc',
              backgroundColor: 'rgba(20, 90, 252, 0.15)',
              tension: 0.25,
              fill: true,
              pointRadius: 2.5
            },
            {
              label: 'Final Net',
              data: dailySeries.map((item) => item.final_net),
              borderColor: '#ff7d4f',
              backgroundColor: 'rgba(255, 125, 79, 0.15)',
              tension: 0.25,
              fill: true,
              pointRadius: 2.5
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: {
            legend: { display: true },
            tooltip: {
              callbacks: {
                label: currencyTooltip
              }
            }
          },
          scales: {
            y: {
              ticks: {
                callback: (value) => fmtCurrency(value)
              }
            }
          }
        }
      });
    }

    const categoryChartElement = document.getElementById('category-chart');
    if (categoryChartElement && categorySeries.length > 0) {
      new Chart(categoryChartElement, {
        type: 'bar',
        data: {
          labels: categorySeries.map((item) => item.category),
          datasets: [
            {
              label: 'Final Net',
              data: categorySeries.map((item) => item.final_net),
              backgroundColor: '#4f46e5'
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: currencyTooltip
              }
            }
          },
          scales: {
            y: {
              ticks: {
                callback: (value) => fmtCurrency(value)
              }
            }
          }
        }
      });
    }

    const storeChartElement = document.getElementById('store-chart');
    if (storeChartElement && storeMixSeries.length > 0) {
      new Chart(storeChartElement, {
        type: 'bar',
        data: {
          labels: storeMixSeries.map((item) => item.store),
          datasets: [
            {
              label: 'Revenue',
              data: storeMixSeries.map((item) => item.revenue),
              backgroundColor: 'rgba(20, 90, 252, 0.7)'
            },
            {
              label: 'Final Net',
              data: storeMixSeries.map((item) => item.final_net),
              backgroundColor: 'rgba(255, 125, 79, 0.7)'
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: {
            tooltip: {
              callbacks: {
                label: currencyTooltip
              }
            }
          },
          scales: {
            y: {
              stacked: false,
              ticks: {
                callback: (value) => fmtCurrency(value)
              }
            }
          }
        }
      });
    }

    const skuChartElement = document.getElementById('sku-chart');
    if (skuChartElement && topSkuSeries.length > 0) {
      new Chart(skuChartElement, {
        type: 'bar',
        data: {
          labels: topSkuSeries.map((item) => item.sku),
          datasets: [
            {
              label: 'Final Net',
              data: topSkuSeries.map((item) => item.final_net),
              backgroundColor: '#0ea5e9'
            }
          ]
        },
        options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: currencyTooltip
              }
            }
          },
          scales: {
            x: {
              ticks: {
                callback: (value) => fmtCurrency(value)
              }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
